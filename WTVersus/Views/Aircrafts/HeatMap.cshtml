@model IEnumerable<WTVersus.Models.Plane>;
@{
    ViewData["Title"] = "Heat Map of Aircrafts";
}

@{

    double AverageMaxSpeetAt0(double BR, string Nation)
    {
        var filteredIEnum = Model.Where(p => p.BR == BR & p.Nation == Nation).Select(p => p.RepairCost.Value);
        double result;
        if (filteredIEnum.Count() != 0)
        {
            result = (filteredIEnum.Max());
        }
        else result = 0;

        return result;
    }
}

<div class="container-fluid">

    <table class="table table-borderless table-sm heatmap">
        <tbody>
            <tr>
                <td style="width: 5%"></td>
                <td style="width: 5%">
                    <img class="mx-auto d-block" src="~/images/USA.png" alt="USA" title="USA" width="40">
                </td>
                <td style="width: 5%">
                    <img class="mx-auto d-block" src="~/images/Germany.png" alt="Germany" title="Germany" width="40">
                </td>
                <td style="width: 5%">
                    <img class="mx-auto d-block" src="~/images/USSR.png" alt="USSR" title="USSR" width="40">
                </td>
                <td style="width: 5%">
                    <img class="mx-auto d-block" src="~/images/Britain.png" alt="Britain" title="Britain" width="40">
                </td>
                <td style="width: 5%">
                    <img class="mx-auto d-block" src="~/images/Japan.png" alt="Japan" title="Japan" width="40">
                </td>
                <td style="width: 5%">
                    <img class="mx-auto d-block" src="~/images/China.png" alt="China" title="China" width="40">
                </td>
                <td style="width: 5%">
                    <img class="mx-auto d-block" src="~/images/Italy.png" alt="Italy" title="Italy" width="40">
                </td>
                <td style="width: 5%">
                    <img class="mx-auto d-block" src="~/images/France.png" alt="France" title="France" width="40">
                </td>
                <td style="width: 5%">
                    <img class="mx-auto d-block" src="~/images/Sweden.png" alt="Sweden" title="Sweden" width="40">
                </td>


            </tr>
            @{
                double[] numbers = new double[] { 1.0, 1.3, 1.7, 2.0, 2.3, 2.7, 3.0, 3.3, 3.7, 4.0, 4.3, 4.7, 5.0, 5.3, 5.7, 6.0, 6.3, 6.7, 7.0, 7.3, 7.7, 8.0, 8.3, 8.7, 9.0, 9.3, 9.7, 10.0, 10.3 };

                foreach (double number in numbers)
                {
                    <tr>
                        <th class="font-weight-bolder text-center">@number</th>
                        @{
                            string[] nations = new string[] { "USA", "Germany", "USSR", "Britain", "Japan", "China", "Italy", "France", "Sweden" };
                            foreach (string nation in nations)
                            {
                                <td>
                                    @AverageMaxSpeetAt0(number, nation)
                                </td>
                            }
                        }
                    </tr>
                }
            }
        </tbody>
    </table>
</div>